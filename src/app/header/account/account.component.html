<div *ngIf="user" id="my_account">
    <div class="bg-cl-secondary py35 pl20">
        <div class="container">
            <div class="breadcrumbs h5 cl-gray">
                <span>
                    <a routerLink="">Homepage</a> /
                </span>
                <span class="cl-mine-shaft">My Account</span>
            </div>
            <h1>My Account</h1>
        </div>
    </div>
    <div class="container pt45 pb70">
        <div class="row px20 pt0">
            <div class="col-md-3 hidden-xs hidden-sm block">
                <nav class="static-menu serif h4 mb35">
                    <ul class="m0 p0">
                        <li class="mb20">
                            <a 
                            (click)="changeView('profile')" 
                            routerLink="/my-account/profile"
                            [class.active]="currentView == 'profile'" 
                            class="cl-accent">My profile</a>
                        </li>
                        <li class="mb20">
                            <a 
                            (click)="changeView('shipping-details')" 
                            routerLink="/my-account/shipping-details" 
                            [class.active]="currentView == 'shipping-details'" 
                            class="cl-accent">My shipping details</a>
                        </li>
                        <li class="mb20">
                            <a 
                            (click)="changeView('orders')" 
                            routerLink="/my-account/orders" 
                            [class.active]="currentView == 'orders'" 
                            class="cl-accent">My orders</a>
                        </li>
                        <li class="mb20">
                            <a 
                            (click)="changeView('wishlist')" 
                            routerLink="/my-account/wishlist" 
                            [class.active]="currentView == 'wishlist'" 
                            class="cl-accent">My Wishlist</a>
                        </li>
                    </ul>
                </nav>
            </div>
            <div class="col-md-9">
                <div *ngIf="currentView == 'profile'" id="account-profile" class="mb35 password-icon">
                    <div class="row mb15">
                        <div class="col-xs-12 col-sm-6 cl-accent">
                            <h3 class="m0 mb5">My profile</h3>
                        </div>
                        <div class="col-xs-12 col-sm-6">
                            <div class="lh30 flex end-md">
                                <a (click)="activeEdit = true" class="cl-tertiary flex edit-profile pointer">
                                    <span class="pr5">Edit your profile</span>
                                    <i class="material-icons cl-tertiary">edit</i>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div [class.hidden]="activeEdit" class="row fs16 mb35 profile-text">
                        <div class="col-xs-12 h4">
                            <p>{{user.name}}</p>
                            <p>{{user.email}}</p>
                            <p>{{user.phone}}</p>
                            <p>{{user.birth_date}}</p>
                        </div>
                    </div>
                    <div [class.hidden]="!activeEdit" class="row profile-edit">
                        <div class="relative base-input col-xs-12 col-md-6 mb10">
                            <div class="relative textbox">
                                <input type="text" name="name" autocomplete="name" class="py10 w-100 border-box brdr-none brdr-bottom-1 brdr-cl-primary h4 sans-serif" value="{{user.name}}">
                                <label>Name</label>
                            </div>
                            <div></div>
                        </div>
                        <div class="relative base-input col-xs-12 col-md-6 mb10">
                            <div class="relative textbox">
                                <input type="text" name="phone" autocomplete="phone" class="py10 w-100 border-box brdr-none brdr-bottom-1 brdr-cl-primary h4 sans-serif" value="{{user.phone}}">
                                <label>Phone</label>
                            </div>
                            <div></div>
                        </div>
                        <div class="relative base-input col-xs-12 col-md-6 mb10">
                            <div class="relative textbox">
                                <input type="email" name="email-address" autocomplete="email" class="py10 w-100 border-box brdr-none brdr-bottom-1 brdr-cl-primary h4 sans-serif" value="{{user.email}}">
                                <label>Email address</label>
                            </div>
                            <div></div>
                        </div>
                        <div class="col-xs-12 mb15">
                            <div class="relative checkbox">
                                <input type="checkbox" id="changePassword" class="m0 no-outline">
                                <label for="changePassword" class="pl35 lh30 h4 pointer">Change my password</label>
                            </div>
                            <div></div>
                        </div>

                        <div class="change-pass hidden relative base-input col-xs-12 col-md-6 mb15 mt10">
                            <div class="relative textbox">
                                <input type="password" name="old-password" autocomplete="current-password" class="py10 w-100 border-box brdr-none brdr-bottom-1 brdr-cl-primary h4 sans-serif pr30 empty">
                                <label>Current password *</label>
                            </div>
                            <button type="button" aria-label="Toggle password visibility" title="Toggle password visibility" class=" icon material-icons absolute brdr-none no-outline p0 bg-cl-transparent cl-brdr-secondary pointer">visibility_off</button>
                            <div></div>
                        </div>
                        <div class="change-pass hidden hidden-xs hidden-sm col-md-6 mb15 mt10"></div>
                        <div class="change-pass hidden relative base-input col-xs-12 col-md-6 mb15 mt10">
                            <div class="relative textbox">
                                <input type="password" name="password" autocomplete="new-password" class="py10 w-100 border-box brdr-none brdr-bottom-1 brdr-cl-primary h4 sans-serif pr30 empty">
                                <label>New password *</label>
                            </div>
                            <button type="button" aria-label="Toggle password visibility" title="Toggle password visibility" class=" icon material-icons absolute brdr-none no-outline p0 bg-cl-transparent cl-brdr-secondary pointer">visibility_off</button> <div></div>
                        </div>
                        <div class="change-pass hidden relative base-input col-xs-12 col-md-6 mb15 mt10">
                            <div class="relative textbox">
                                <input type="password" name="password-confirm" autocomplete="new-password" class="py10 w-100 border-box brdr-none brdr-bottom-1 brdr-cl-primary h4 sans-serif pr30 empty">
                                <label>Repeat new password *</label>
                            </div>
                            <button type="button" aria-label="Toggle password visibility" title="Toggle password visibility" class="icon material-icons absolute brdr-none no-outline p0 bg-cl-transparent cl-brdr-secondary pointer">visibility_off</button> <div></div>
                        </div>
                        <div class="col-xs-12 col-sm-6">
                            <button type="button" data-testid="subscribeSubmit" class="no-outline button-full block brdr-none w-100 px10 py20 bg-cl-mine-shaft :bg-cl-th-secondary ripple weight-400 h4 cl-white sans-serif fs-medium">Update my profile</button>
                        </div>
                        <div class="col-xs-12 col-sm-6 flex middle-xs py10">
                            <a (click)="activeEdit = false" class="h4 cl-accent pointer">Cancel</a>
                        </div>
                    </div>
                </div>
                <div *ngIf="currentView == 'shipping-details'" id="account-shipping" class="mb35">
                    <div class="row mb15">
                        <div class="col-xs-12 col-sm-6 cl-accent">
                            <h3 class="m0 mb5">My shipping details</h3>
                        </div>
                        <div class="col-xs-12 col-sm-6">
                            <div class="lh30 flex end-md">
                                <a href="#" class="cl-tertiary flex edit-shipping">
                                    <span class="pr5">Edit your shipping details</span>
                                    <i class="material-icons cl-tertiary">edit</i>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="row fs16 mb35 shipping-text">
                        <div class="col-xs-12 h4">
                            <p>Samir Nabil</p>  
                            <p class="mb25"></p>
                            <p class="mb25">{{ user.first_address }}</p>
                            <p *ngIf="user.second_address" class="mb25">{{ user.second_address }}</p>
                            <p class="mb25"><span>{{user.city}}, </span> {{user.country}}</p>
                            <div class="mb25">{{user.phone}}<span class="tooltip relative">
                                <i class="material-icons icon cl-accent">info</i>
                                <div class="text absolute p25 h5 bg-cl-th-accent cl-white">    Phone number may be needed by carrier</div></span>
                            </div>
                        </div>
                    </div>
                    <div class="row hidden shipping-edit">
                        
                        <div class="relative base-input col-xs-12 col-sm-6 mb10">
                            <div class="relative textbox">
                                <input type="text" name="first-name" autocomplete="given-name" class="py10 w-100 border-box brdr-none brdr-bottom-1 brdr-cl-primary h4 sans-serif empty">
                                <label>First name *</label>
                            </div>
                            
                            <div>
                                
                                
                            </div>
                        </div>
                        <div class="relative base-input col-xs-12 col-sm-6 mb10">
                            <div class="relative textbox">
                                <input type="text" name="last-name" autocomplete="family-name" class="py10 w-100 border-box brdr-none brdr-bottom-1 brdr-cl-primary h4 sans-serif empty">
                                <label>Last name *</label>
                            </div>
                            
                            <div>
                                
                            </div>
                        </div>
                        <div class="relative base-input col-xs-12 col-sm-6 mb10">
                            <div class="relative textbox">
                                <input type="text" name="street-address" autocomplete="address-line1" class="py10 w-100 border-box brdr-none brdr-bottom-1 brdr-cl-primary h4 sans-serif empty">
                                <label>Street name *</label>
                            </div>
                            
                            <div>
                                
                            </div>
                        </div>
                        <div class="relative base-input col-xs-12 col-sm-6 mb10">
                            <div class="relative textbox">
                                <input type="text" name="apartment-number" autocomplete="address-line2" class="py10 w-100 border-box brdr-none brdr-bottom-1 brdr-cl-primary h4 sans-serif empty">
                                <label>House/Apartment number *</label>
                            </div>
                            
                            <div>
                                
                            </div>
                        </div>
                        <div class="relative base-input col-xs-12 col-sm-6 mb10">
                            <div class="relative textbox">
                                <input type="text" name="city" autocomplete="address-level2" class="py10 w-100 border-box brdr-none brdr-bottom-1 brdr-cl-primary h4 sans-serif empty">
                                <label>City *</label>
                            </div>
                            
                            <div>
                                
                            </div>
                        </div>
                        <div class="relative base-input col-xs-12 col-sm-6 mb10">
                            <div class="relative textbox">
                                <input type="text" name="state" autocomplete="address-level1" class="py10 w-100 border-box brdr-none brdr-bottom-1 brdr-cl-primary h4 sans-serif empty">
                                <label>State / Province</label>
                            </div>
                            
                            <div></div>
                        </div>
                        <div class="relative base-input col-xs-12 col-sm-6 mb10">
                            <div class="relative textbox">
                                <input type="text" name="zip-code" autocomplete="postal-code" class="py10 w-100 border-box brdr-none brdr-bottom-1 brdr-cl-primary h4 sans-serif empty">
                                <label>Zip-code *</label>
                            </div>
                            
                            <div>
                                
                                
                            </div>
                        </div>
                        <div class="select-wrapper relative col-xs-12 col-sm-6 mb10" value="EG">
                            <select name="countries" autocomplete="country-name" class="">
                                
                                <option value="AF">
                                    Afghanistan
                                </option>
                                <option value="AL">
                                    Albania
                                </option>                                        
                                <option value="ZW">
                                    Zimbabwe
                                </option>
                                <option value="AX">
                                    Åland Islands
                                </option>
                            </select>
                            <label>Country *</label>
                            <div>
                                
                            </div>
                        </div>
                        <div class="relative base-input col-xs-12 col-sm-6 mb10">
                            <div class="relative textbox">
                                <input type="text" name="phone-number" autocomplete="tel" class="py10 w-100 border-box brdr-none brdr-bottom-1 brdr-cl-primary h4 sans-serif empty">
                                <label>Phone Number</label>
                            </div>
                            
                            <div></div>
                        </div>
                        <div class="hidden-xs col-sm-6 mb25"></div>
                        <div class="col-xs-12 col-sm-6">
                            <button type="button" class="no-outline button-full block brdr-none w-100 px10 py20 bg-cl-mine-shaft :bg-cl-th-secondary ripple weight-400 h4 cl-white sans-serif fs-medium">Update my shipping details</button>
                        </div>
                        <div class="col-xs-12 col-sm-6 flex middle-xs py10">
                            <a href="#" class="h4 cl-accent">Cancel</a>
                        </div>
                    </div>
                </div>
                <div *ngIf="currentView == 'orders'" class="mb35">
                   <div class="row mb15">
                      <div class="col-xs-12 col-sm-6">
                         <h3 class="m0 mb5">
                            My orders
                         </h3>
                      </div>
                   </div>
                   <div class="row">
                      <div *ngIf="orders" class="col-xs-12">
                         <table class="brdr-1 serif brdr-cl-bg-secondary w-100">
                            <thead>
                               <tr>
                                  <th class="p20 lh20">Order ID</th>
                                  <th class="p20 lh20 no-mobile">Date and time</th>
                                  <th class="p20 lh20 no-mobile">Author</th>
                                  <th class="p20 lh20 no-mobile">Value</th>
                                  <th class="p20 lh20 no-mobile">Status</th>
                                  <th class="p20 lh20">&nbsp;</th>
                               </tr>
                            </thead>
                            <tbody>
                               <tr *ngFor="let order of orders" class="brdr-top-1 brdr-cl-bg-secondary">
                                  <td class="fs-medium lh25">{{ order.order_code }}</td>
                                  <td class="fs-medium lh25 no-mobile">{{ order.date }}</td>
                                  <td class="fs-medium lh25 no-mobile">{{ order.qty }}</td>
                                  <td class="fs-medium lh25 no-mobile">{{ order.net }} L.E</td>
                                  <td class="fs-medium lh25 no-mobile">{{ order.status }}</td>
                                  <td class="fs-medium lh25">
                                     <span class="relative dropdown">
                                        <i class="material-icons cl-secondary pointer">more_horiz</i> 
                                        <div class="dropdown-content bg-cl-primary align-left sans-serif lh20 weight-400 fs-medium-small py5"><a (click)="getOrder(order.order_code)" href="/my-account/orders#{{ order.order_code }}" class="no-underline block py10 px15">
                                           View order
                                           </a> <a *ngIf="order.status == 'pending'" class="no-underline block py10 px15">Cancel Order</a>
                                        </div>
                                     </span>
                                  </td>
                               </tr>
                            </tbody>
                         </table>
                      </div>
                      <div *ngIf="!orders" class="col-xs-12 h4">
                         <p>No orders yet</p>
                      </div>
                   </div>
                </div>
                <div *ngIf="currentView == 'order' && order" class="mb35 order">
                   <div class="row mb15">
                      <div class="col-xs-12 col-md-2 col-lg-1"><button (click)="changeView('orders')" type="button" data-testid="returnButton" class="inline-flex brdr-none p12 icon pointer"><i class="material-icons">keyboard_backspace</i></button></div>
                      <div class="col-xs-12 col-md-6">
                         <h3 class="m0 mb5 mt5">
                            Order #{{ order.order.order_code }}
                            <span class="brdr-1 brdr-cl-bg-secondary py5 px10 ml20 sans-serif fs-medium-small weight-400 cl-secondary">
                            {{ order.order.status }}
                            </span>
                         </h3>
                      </div>
                   </div>
                   <div class="row fs16 mb20">
                      <div class="col-xs-12 h4">
                         <p>{{ order.order.date }}</p>
                      </div>
                   </div>
                   <div class="row fs16 mb35">
                      <div class="col-xs-12 h4">
                         <h4>Items ordered</h4>
                         <table class="brdr-1 serif brdr-cl-bg-secondary">
                            <thead>
                               <tr>
                                  <th class="lh20">Product Name</th>
                                  <th class="lh20">SKU</th>
                                  <th class="lh20">Price</th>
                                  <th class="lh20">Qty</th>
                                  <th class="lh20">Subtotal</th>
                                  <th class="lh20">Thumbnail</th>
                               </tr>
                            </thead>
                            <tbody>
                               <tr *ngFor="let item of order.details" class="brdr-top-1 brdr-cl-bg-secondary">
                                  <td class="fs-medium lh25">{{item.item_name}}</td>
                                  <td class="fs-medium lh25">{{item.item_id}}</td>
                                  <td data-th="Price" class="fs-medium lh25">{{item.price}}</td>
                                  <td data-th="Qty" class="fs-medium lh25 align-right">{{item.qty}}
                                  </td>
                                  <td data-th="Subtotal" class="fs-medium lh25">{{item.price * item.qty}}</td>
                                  <td class="fs-medium lh25">
                                    <div class="product-image product-image--width">
                                        
                                        <img 
                                        class="product-image__thumb" 
                                        [defaultImage]="'assets/placeholder.svg'"
                                        [lazyLoad]="'https://www.msou.com/collection/small/' + item.image">

                                    </div>
                                  </td>
                               </tr>
                            </tbody>
                            <tfoot>
                               <tr class="brdr-top-1 brdr-cl-bg-secondary">
                                  <td colspan="5" class="align-right">
                                     Subtotal
                                  </td>
                                  <td>{{ConvertString(order.order.net) - ConvertString(order.order.shipping) + ConvertString(order.order.discount)}}</td>
                               </tr>
                               <tr>
                                  <td colspan="5" class="align-right">
                                     Shipping
                                  </td>
                                  <td>{{order.order.shipping}}</td>
                               </tr>
                               <tr>
                                  <td colspan="5" class="align-right">
                                     Discount
                                  </td>
                                  <td>{{order.order.discount}}</td>
                               </tr>
                               <!----> 
                               <tr>
                                  <td colspan="5" class="align-right">
                                     Grand total
                                  </td>
                                  <td>{{ order.order.net }}</td>
                               </tr>
                            </tfoot>
                         </table>
                      </div>
                   </div>
                   <!-- <div class="row fs16 mb35">
                      <div class="col-xs-12 h4">
                         <h4>Order informations</h4>
                         <div class="row">
                            <div class="col-sm-6 col-md-3">
                               <h5>Shipping address</h5>
                               <address>
                                  <p>Samir Nabil</p>
                                  <p>114 Amar Ibn Yasser Street, Heliopolis 114</p>
                                  <p>11736 Cairo</p>
                                  <p></p>
                               </address>
                            </div>
                            <div class="col-sm-6 col-md-3">
                               <h5>Shipping method</h5>
                               <p>Flat Rate - Fixed</p>
                            </div>
                            <div class="col-sm-6 col-md-3">
                               <h5>Billing address</h5>
                               <address>
                                  <p>Samir Nabil</p>
                                  <p>114 Amar Ibn Yasser Street, Heliopolis 114</p>
                                  <p>11736 Cairo</p>
                                  <p></p>
                               </address>
                            </div>
                            <div class="col-sm-6 col-md-3">
                               <h5>Payment method</h5>
                               <p>Cash On Delivery</p>
                            </div>
                         </div>
                      </div>
                   </div> -->
                </div>
            </div>
        </div>
    </div>
</div>